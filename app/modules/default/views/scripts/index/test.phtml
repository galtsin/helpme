<?php
$json = $this->json;
?>
<?php
$jScript = <<<JS
require([
    "dojo/query",
    "core/Ajax",
    "dojo/_base/lang",
    "dojo/Deferred",
    "dojo/request/xhr",
    "core/layout/Msg",
    "app/widgets/SearchCompany",
    "core/layout/Overlay"
], function(query, Ajax, lang, Deferred, xhr, Msg, SC, Overlay){
    dojo.ready(function(){

        var sc = new SC();
        sc.show();

/*        var o = new Overlay({
            domNode: 'header'
        });

        o.show();
        setTimeout(function(){
            o.hide();
        }, 1000);

                    setTimeout(function(){
                o.show();
            }, 3000);*/


/*
        var t = Ajax.load('http://192.168.1.51/default/index/ajax', {
            handleAs: 'text',
            overlay: new Overlay({
                domNode: query('.container')[0]
            }),
            timeout: 1000
        });

        t.then(function(r){
        console.log(r);
        }, function(e){
            console.log(e.response);
        });
*/




        //process.cancel();
        //process.reject('PROCESS_STATE_WAITING');
        //process.resolve('fffff');

/*        var deferred = xhr('http://192.168.1.51/default/index/ajax', {
            method: 'post',
            handleAs: 'text',
            timeout: 3000
        });*/




        var deferred = new Deferred(function(){
            alert('Cancel');
        });

/*        setTimeout(function(){
          deferred.resolve("success");
        }, 400);*/

/*        setTimeout(function(){
          deferred.reject("ooops");
        }, 900);

        setTimeout(function(){
          deferred.cancel("process");
        }, 2000);

        //deferred.progress(update);

        deferred.then(function(value){
            // Do something when the process completes
            alert(value);
        }, function(err){
            // Do something when the process errors out
            alert(err + 'Error');
        });*/

    });
});
JS;
$this->headScript()->appendScript($jScript, $type = 'text/javascript')
?>
<div style="text-align: center; margin: 20px 0 0; padding: 100px 0; background: #f3f3f3;">
    <img src="<?php echo $this->baseUrl('theme/default/images/hm.jpg')?>"/>
</div>
<form id="testform">
    <label for="_1_">f</label>
    <input type="text" id="_1_" name="account" required="true">
</form>
<!-- Шаблон для -->
<script id="entry-template" type="text/x-handlebars-template">
    <div class="entry">
        <h1>{{title}}</h1>
        <div class="body">
            {{body}}
            <ul class="people_list">
                {{#each people}}<li>{{this}}</li>{{/each}}
            </ul>
        </div>
    </div>
</script>