<?php
$json = $this->json;
?>
<?php
$jScript = <<<JS
require(["core/layout/Processing", "core/layout/Messenger", "core/Layout", "dojo/_base/lang"]);
dojo.ready(function(){
var template = Handlebars.compile(dojo.byId("entry-template").innerHTML);
console.log(template({title: "Alan", body: "Johnson", people: ['sdfdsf', 'dfsdfsdf']}));
/*var processing = core.layout.Processing({node: dojo.byId('loader')});
processing.show('SEND');*/

/*var messenger = new core.layout.Messenger({node: dojo.byId('messenger')});
messenger.send('PROCESS_OK');*/

var Layout = new core.Layout({
    timeout: 3000,
    messenger: {
        node: dojo.byId('messenger')
    },
    processing: {
        node: dojo.byId('loader')
    }
});

var a = {opt1: 1, opt2: 2};
var b = {opt3: 3, opt4: 4, opt1: '_1'};
dojo.mixin(a,b);
console.log(a);

Layout.load().addCallback(function(results){
console.log(results);
});

});
JS;
$this->headScript()->appendScript($jScript, $type = 'text/javascript')
?>
<div style="text-align: center; margin: 20px 0 0; padding: 100px 0; background: #f3f3f3;">
    <img src="<?php echo $this->baseUrl('theme/default/images/hm.jpg')?>"/>
</div>

<!-- Шаблон для -->
<script id="entry-template" type="text/x-handlebars-template">
    <div class="entry">
        <h1>{{title}}</h1>
        <div class="body">
            {{body}}
            <ul class="people_list">
                {{#each people}}<li>{{this}}</li>{{/each}}
            </ul>
        </div>
    </div>
</script>